<!DOCTYPE html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="Y8K1CscHwzkRT3EBVghOWZYS9AIHVqbKSg1lCLaSrBY" />
  <meta name="description" content="I'm a Mumbai-based Entrepreneur, Ruby on Rails monomaniac and Food enthusiast. Best known for turning ideas into reality and Co-founder of Classpro.">
  <meta name="author" content="deepak dargade">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Deepak Dargade</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Deepak Dargade" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Yesterday i was working on destroy action of a model in. Before deletion I had to check whether the model has any child model or not. Even the model has child model, but deletion was successful even though i had set to false." />
<meta property="og:description" content="Yesterday i was working on destroy action of a model in. Before deletion I had to check whether the model has any child model or not. Even the model has child model, but deletion was successful even though i had set to false." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-02-29T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Deepak Dargade" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2012-02-29T00:00:00+05:30","datePublished":"2012-02-29T00:00:00+05:30","description":"Yesterday i was working on destroy action of a model in. Before deletion I had to check whether the model has any child model or not. Even the model has child model, but deletion was successful even though i had set to false.","headline":"Deepak Dargade","mainEntityOfPage":{"@type":"WebPage","@id":"/2012/02/29/position-of-callbacks-is-important-in-rails-model.html"},"url":"/2012/02/29/position-of-callbacks-is-important-in-rails-model.html"}</script>
<!-- End Jekyll SEO tag -->


  <title>Deepak Dargade</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
  <link rel="stylesheet" href="/static/css/milligram.min.css">
  <style type="text/css">
      .header {
        background-color: #f4f5f6;
        padding: 3rem;
        margin-bottom: 50px;
      }
      .header .container {
        position: relative;
        border-top: 0;
        text-align: left;
      }
      .header .img {
        height: 15.0rem;
        margin-bottom: 2rem;
      }
      .header + section {
        border-top: 0;
      }
      .header .button {
        margin-top: 2rem;
        margin-bottom: 4rem;
      }
      @media (min-width: 40.0rem) {
        .header .button {
          margin-top: 2rem;
          margin-bottom: 4rem;
        }
      }

      .footer {
        background-color: #f4f5f6;
        padding: 3rem;
        margin-top: 5rem;
      }

      .footer .container {
        position: relative;
        border-top: 0;
        text-align: left;
      }

      a{
        color: #00796b;
      }
      pre{
        border-left: .3rem solid #00796b;
        padding: 25px;
      }
      hr{
        margin-top: 1rem;
        margin-bottom: 1rem;
      }
  </style>
</head>

<body id="home">
  
  <header class="header">
    <section class="container">
      <h3 class="title">
        <a href="/" title="Deepak Dargade">Deepak Dargade</a>.
      </h3>
      <p class="description">I'm a Mumbai-based Entrepreneur, Ruby on Rails monomaniac and Food enthusiast.<br/>Best known for turning ideas into reality and Co-founder of Classpro.</p>
    </section>
  </header>

  <div class="container">
    <div class="row">
      <div class="column">
        <div class="row">
  <div class="column">
    <p>Yesterday i was working on destroy action of a model in. Before deletion I had to check whether the model has any child model or not. Even the model has child model, but deletion was successful even though i had set to false.</p>

<p>So i got curious and checked the rails issues. There i got to know a important concept of position of different members of model class in rails.</p>

<p>In my case i had placed belongs_to, has_many, validations and then callbacks.</p>

<p>So if I am using before_destroy, the rails follows the same sequence in my model. It first deletes the associated models if dependent destroy is mentioned, then checks for validations and then my before_destroy callback where i had explicitly told it to return false if child model size &gt; 0. But since child model are already destroyed the size is 0 and my condition in before_destroy fails.</p>

<p>The solution is to place before_destroy above all.</p>

<p>So now rails will call callbacks first and then associations and validations.</p>

<p>It also helps in reducing the number of sql queries executed. In my case it reduced from 25 to 5. pretty good.</p>

  </div>
</div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <section class="container">
      Â© 2022 deepakdargade.com
      | <a href="https://twitter.com/deepakd88">@deepakd88</a>
    </section>
  </footer>

  
  
</body>
</html>
